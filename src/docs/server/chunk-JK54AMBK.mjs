import './polyfills.server.mjs';
import{b as I,c as m,d as q,e as j,f as P,g as G,h as $,i as k,j as V,k as Z}from"./chunk-VQS4JJOU.mjs";import{a as H}from"./chunk-WKKJAMEM.mjs";import{Aa as w,Ca as c,Hb as B,Ka as o,Mb as b,Na as M,W as l,aa as E,ca as h,da as y,na as a,oa as d,qb as z,ra as O,sa as n,ta as i,ua as s,v,va as T,wa as A}from"./chunk-JZ2JMAKR.mjs";import"./chunk-T55IDOPT.mjs";var N=/^[А-Яа-яЁё]+$/,J=/^\+?\d{11}$/,K=/^[A-Za-zA-Яа-яЁё0-9\/ ]+$/;var L=/^[A-Za-zА-Яа-яЁёÀ-ÿ\s\-'’]{2,125}$/,Q=/^[A-Za-z0-9]{3,10}$/;function X(e,u){e&1&&o(0,"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u0432\u0435\u0441\u0442\u0438 \u0438\u043C\u044F ")}function Y(e,u){e&1&&o(0,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u043E\u0435 \u0438\u043C\u044F ")}function ee(e,u){if(e&1&&(n(0,"span",8),a(1,X,1,0)(2,Y,1,0),i()),e&2){let t,r=c();l(),d(!((t=r.orderForm.get("firstName"))==null||t.errors==null)&&t.errors.required?1:2)}}function te(e,u){e&1&&o(0,"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u0432\u0435\u0441\u0442\u0438 \u0444\u0430\u043C\u0438\u043B\u0438\u044E ")}function re(e,u){e&1&&o(0,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u0443\u044E \u0444\u0430\u043C\u0438\u043B\u0438\u044E ")}function ue(e,u){if(e&1&&(n(0,"span",8),a(1,te,1,0)(2,re,1,0),i()),e&2){let t,r=c();l(),d(!((t=r.orderForm.get("lastName"))==null||t.errors==null)&&t.errors.required?1:2)}}function ie(e,u){e&1&&o(0,"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u043B\u0435\u0444\u043E\u043D ")}function oe(e,u){e&1&&o(0," \u0412 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0435 11 \u0446\u0438\u0444\u0440 ")}function ne(e,u){if(e&1&&(n(0,"span",8),a(1,ie,1,0)(2,oe,1,0),i()),e&2){let t,r=c();l(),d(!((t=r.orderForm.get("phone"))==null||t.errors==null)&&t.errors.required?1:2)}}function le(e,u){e&1&&o(0,"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u0432\u0435\u0441\u0442\u0438 \u0441\u0442\u0440\u0430\u043D\u0443 ")}function ae(e,u){e&1&&o(0," \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0442\u0440\u0430\u043D\u044B \u043C\u0438\u043D\u0438\u043C\u0443\u043C 2 \u0441\u0438\u043C\u0432\u043E\u043B\u0430 ")}function de(e,u){if(e&1&&(n(0,"span",8),a(1,le,1,0)(2,ae,1,0),i()),e&2){let t,r=c();l(),d(!((t=r.orderForm.get("country"))==null||t.errors==null)&&t.errors.required?1:2)}}function me(e,u){e&1&&o(0,"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u0432\u0435\u0441\u0442\u0438 \u0438\u043D\u0434\u0435\u043A\u0441 ")}function se(e,u){e&1&&o(0," \u0418\u043D\u0434\u0435\u043A\u0441 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u0442 \u043E\u0442 3 \u0434\u043E 10 \u0431\u0443\u043A\u0432/\u0446\u0438\u0444\u0440 ")}function ce(e,u){if(e&1&&(n(0,"span",8),a(1,me,1,0)(2,se,1,0),i()),e&2){let t,r=c();l(),d(!((t=r.orderForm.get("zip"))==null||t.errors==null)&&t.errors.required?1:2)}}function pe(e,u){e&1&&o(0,"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u0432\u0435\u0441\u0442\u0438 \u0430\u0434\u0440\u0435\u0441 ")}function _e(e,u){e&1&&o(0," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 \u0430\u0434\u0440\u0435\u0441 ")}function fe(e,u){if(e&1&&(n(0,"span",8),a(1,pe,1,0)(2,_e,1,0),i()),e&2){let t,r=c();l(),d(!((t=r.orderForm.get("address"))==null||t.errors==null)&&t.errors.required?1:2)}}function ge(e,u){e&1&&(n(0,"div",8),o(1,"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437"),i())}var F=class e{constructor(u,t,r){this.catalogSrv=u;this.fb=t;this.router=r;this.orderForm=this.fb.group({firstName:["",[m.required,m.pattern(N)]],lastName:["",[m.required,m.pattern(N)]],phone:["",[m.required,m.pattern(J)]],country:["",[m.required,m.pattern(L)]],zip:["",[m.required,m.pattern(Q)]],address:["",[m.required,m.pattern(K)]],comment:["",[]]})}teaItem(){let u={id:0,image:"",title:"",price:0,description:""};return this.catalogSrv.tea()&&(u=this.catalogSrv.tea()),u}subscriptionOrder=null;orderForm;errorSend=!1;get name_dirty(){return this.orderForm.get("firstName")?.dirty}get phone_dirty(){return this.orderForm.get("phone")?.dirty}get country_dirty(){return this.orderForm.get("country")?.dirty}get zip_dirty(){return this.orderForm.get("zip")?.dirty}get address_dirty(){return this.orderForm.get("address")?.dirty}get lastname_dirty(){return this.orderForm.get("lastName")?.dirty}ngOnDestroy(){this.subscriptionOrder?.unsubscribe()}send_order(){this.orderForm.valid&&this.catalogSrv.tea()&&(this.catalogSrv.orderData={name:this.orderForm.get("firstName").value,last_name:this.orderForm.get("lastName").value,phone:this.orderForm.get("phone").value,country:this.orderForm.get("country").value,zip:this.orderForm.get("zip").value,address:this.orderForm.get("address").value,product:this.catalogSrv.tea().id},this.orderForm.get("comment").value&&(this.catalogSrv.orderData.comment=this.orderForm.get("comment").value),this.subscriptionOrder=this.catalogSrv.sendOrder().subscribe(u=>{u.success&&!u.message?this.to_success():this.to_error()}))}to_success(){this.orderForm.reset(),this.router.navigate(["/success"])}to_error(){this.errorSend=!0}static \u0275fac=function(t){return new(t||e)(E(H),E(k),E(B))};static \u0275cmp=h({type:e,selectors:[["order-component"]],decls:50,vars:10,consts:[[1,"d-flex","flex-col","mt-5","mb-1","justify-content-center"],[1,"card","text-center","card-order","border-0"],[1,"card-title"],[1,"col","order-item-text"],["type","text","disabled","",1,"form-control",3,"value"],["novalidate","",1,"needs-validation",3,"formGroup"],[1,"row","g-3","row-cols-1","row-cols-sm-2","row-cols-md-3","justify-content-between","order-items-fio"],["type","text","formControlName","firstName",1,"form-control"],[1,"text-danger"],["type","text","formControlName","lastName",1,"form-control"],["type","text","formControlName","phone",1,"form-control"],[1,"row","g-3","row-cols-1","row-cols-md-2","justify-content-between","order-items-country"],["type","text","formControlName","country",1,"form-control"],["type","text","formControlName","zip",1,"form-control"],["type","text","formControlName","address",1,"form-control"],["type","text","formControlName","comment",1,"form-control"],[1,"col","order-item-text","text-center"],[1,"btn","btn-primary","bitem-send",3,"click"]],template:function(t,r){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),o(4,"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),i()(),n(5,"div",3)(6,"h6"),o(7,"\u0422\u043E\u0432\u0430\u0440"),i(),s(8,"input",4),i(),n(9,"form",5)(10,"div",6)(11,"div",3)(12,"h6"),o(13,"\u0418\u043C\u044F"),i(),s(14,"input",7),a(15,ee,3,1,"span",8),i(),n(16,"div",3)(17,"h6"),o(18,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"),i(),s(19,"input",9),a(20,ue,3,1,"span",8),i(),n(21,"div",3)(22,"h6"),o(23,"\u0422\u0435\u043B\u0435\u0444\u043E\u043D"),i(),s(24,"input",10),a(25,ne,3,1,"span",8),i()(),n(26,"div",11)(27,"div",3)(28,"h6"),o(29,"\u0421\u0442\u0440\u0430\u043D\u0430"),i(),s(30,"input",12),a(31,de,3,1,"span",8),i(),n(32,"div",3)(33,"h6"),o(34,"\u0418\u043D\u0434\u0435\u043A\u0441"),i(),s(35,"input",13),a(36,ce,3,1,"span",8),i()(),n(37,"div",3)(38,"div")(39,"h6"),o(40,"\u0410\u0434\u0440\u0435\u0441"),i()(),s(41,"input",14),a(42,fe,3,1,"span",8),i(),n(43,"div",3),o(44," \u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043A\u0430\u0437\u0443 (\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E) "),s(45,"input",15),i()(),n(46,"div",16)(47,"button",17),w("click",function(){return r.send_order()}),o(48,"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"),i(),a(49,ge,2,0,"div",8),i()()()),t&2){let p,_,f,g,C,x;l(8),O("value",M(r.teaItem().title)),l(),O("formGroup",r.orderForm),l(6),d((p=r.orderForm.get("firstName"))!=null&&p.invalid&&((p=r.orderForm.get("firstName"))!=null&&p.touched||r.name_dirty)?15:-1),l(5),d((_=r.orderForm.get("lastName"))!=null&&_.invalid&&((_=r.orderForm.get("lastName"))!=null&&_.touched||r.lastname_dirty)?20:-1),l(5),d((f=r.orderForm.get("phone"))!=null&&f.invalid&&((f=r.orderForm.get("phone"))!=null&&f.touched||r.phone_dirty)?25:-1),l(6),d((g=r.orderForm.get("country"))!=null&&g.invalid&&((g=r.orderForm.get("country"))!=null&&g.touched||r.country_dirty)?31:-1),l(5),d((C=r.orderForm.get("zip"))!=null&&C.invalid&&((C=r.orderForm.get("zip"))!=null&&C.touched||r.zip_dirty)?36:-1),l(6),d((x=r.orderForm.get("address"))!=null&&x.invalid&&((x=r.orderForm.get("address"))!=null&&x.touched||r.address_dirty)?42:-1),l(7),d(r.errorSend?49:-1)}},dependencies:[V,P,I,q,j,Z,G,$],styles:[".card-order[_ngcontent-%COMP%]{width:60%;margin-top:48px;border-color:transparent}.order-item-text[_ngcontent-%COMP%]{padding-left:0;padding-top:12px;padding-bottom:12px;text-align:left;border-color:transparent}.bitem-send[_ngcontent-%COMP%]{width:220px}.zip-field[_ngcontent-%COMP%]{width:180px}"]})};var S=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=h({type:e,selectors:[["success-send"]],decls:4,vars:0,consts:[[1,"container","text-center","main-container"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"strong")(2,"h2"),o(3,"\u0421\u043F\u0430\u0441\u0438\u0431\u043E \u0437\u0430 \u0437\u0430\u043A\u0430\u0437!"),A()()())},styles:[".main-container[_ngcontent-%COMP%]{padding-top:98px;padding-bottom:98px;max-width:1200px}"]})};var Ce=[{path:"order",component:F},{path:"success",component:S}],D=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=y({type:e});static \u0275inj=v({imports:[b.forChild(Ce),b]})};var U=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=y({type:e});static \u0275inj=v({imports:[z,D]})};export{U as OrderModule};
